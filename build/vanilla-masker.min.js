!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.VMasker=b()}(this,function(){var a=function(a){return a=a||{},a={delimiter:a.delimiter||".",lastOutput:a.lastOutput,precision:a.hasOwnProperty("precision")?a.precision:2,separator:a.separator||",",showSignal:a.showSignal,suffixUnit:a.suffixUnit&&" "+a.suffixUnit.replace(/[\s]/g,"")||"",unit:a.unit&&a.unit.replace(/[\s]/g,"")+" "||"",zeroCents:a.zeroCents},a.moneyPrecision=a.zeroCents?0:a.precision,a},b=function(a,b,c){for(;b<a.length;b++)"9"!==a[b]&&"A"!==a[b]&&"S"!==a[b]||(a[b]=c);return a},c=function(a){this.elements=a};c.prototype.unbindElementToMask=function(){for(var a=0,b=this.elements.length;a<b;a++)this.elements[a].lastOutput="",this.elements[a].oninput=!1,this.elements[a].value.length&&(this.elements[a].value=this.elements[a].value.replace(/\D/g,""))},c.prototype.bindElementToMask=function(a){for(var b=this,c=function(c){c=c||window.event;var e=c.target||c.srcElement;setTimeout(function(){b.opts.lastOutput=e.lastOutput,e.value=d[a](e.value,b.opts),e.lastOutput=e.value,e.setSelectionRange&&b.opts.suffixUnit&&e.setSelectionRange(e.value.length,e.value.length-b.opts.suffixUnit.length)},0)},e=0,f=this.elements.length;e<f;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=c,this.elements[e].value.length&&(this.elements[e].value=d[a](this.elements[e].value,this.opts))},c.prototype.maskMoney=function(b){this.opts=a(b),this.bindElementToMask("toMoney")},c.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},c.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},c.prototype.maskPattern=function(a){this.opts={pattern:a},this.bindElementToMask("toPattern")},c.prototype.unMask=function(){this.unbindElementToMask()};var d=function(a){if(!a)throw new Error("VanillaMasker: There is no element to bind.");var b="length"in a?a.length?a:[]:[a];return new c(b)};return d.toMoney=function(b,c){if(c=a(c),c.zeroCents){c.lastOutput=c.lastOutput||"";var d="("+c.separator+"[0]{0,"+c.precision+"})",e=new RegExp(d,"g"),f=b.toString().replace(/[\D]/g,"").length||0,g=c.lastOutput.toString().replace(/[\D]/g,"").length||0;b=b.toString().replace(e,""),f<g&&(b=b.slice(0,b.length-1))}var h=b.toString(),i=h.indexOf(c.separator),j=c.precision-(h.length-i-1);-1!==i&&j>0&&(h+="0"*j),h=h.replace(/[\D]/g,"");var k=new RegExp("^(0|\\"+c.delimiter+")"),l=new RegExp("(\\"+c.separator+")$"),m=h.substr(0,h.length-c.moneyPrecision),n=m.substr(0,m.length%3),o=new Array(c.precision+1).join("0");m=m.substr(m.length%3,m.length);for(var p=0,q=m.length;p<q;p++)p%3==0&&(n+=c.delimiter),n+=m[p];n=n.replace(k,""),n=n.length?n:"0";var r="";if(!0===c.showSignal&&(r=b<0||b.startsWith&&b.startsWith("-")?"-":""),!c.zeroCents){var s=Math.max(0,h.length-c.precision),t=h.substr(s,c.precision),u=t.length;o=(o+t).slice(-(c.precision>u?c.precision:u))}return(c.unit+r+n+c.separator+o).replace(l,"")+c.suffixUnit},d.toPattern=function(a,c){var d,e="object"==typeof c?c.pattern:c,f=e.replace(/\W/g,""),g=e.split(""),h=a.toString().replace(/\W/g,""),i=h.replace(/\W/g,""),j=0,k=g.length,l="object"==typeof c?c.placeholder:void 0;for(d=0;d<k;d++){if(j>=h.length){if(f.length==i.length)return g.join("");if(void 0!==l&&f.length>i.length)return b(g,d,l).join("");break}if("9"===g[d]&&h[j].match(/[0-9]/)||"A"===g[d]&&h[j].match(/[a-zA-Z]/)||"S"===g[d]&&h[j].match(/[0-9a-zA-Z]/))g[d]=h[j++];else{if("9"===g[d]||"A"===g[d]||"S"===g[d])return void 0!==l?b(g,d,l).join(""):g.slice(0,d).join("");g[d]===h[j]&&j++}}return g.join("").substr(0,d)},d.toNumber=function(a){return a.toString().replace(/(?!^-)[^0-9]/g,"")},d.toAlphaNumeric=function(a){return a.toString().replace(/[^a-z0-9 ]+/i,"")},d});